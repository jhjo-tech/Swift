# Optional

Optionalì€ ê°’ì´ ìˆì„ìˆ˜ë„ ì—†ì„ìˆ˜ë„ ìˆëŠ” ìƒí™©ì—ì„œ ì‚¬ìš©í•©ë‹ˆë‹¤.

Objective-Cì—ëŠ” ì—†ëŠ” ê°œë…ì…ë‹ˆë‹¤.

possibleNumberì— ê°’ì´ ì—†ìœ¼ë©´ convertedNumberì—ë„ ê°’ì´ ì—†ì´ì§€ê¸° ë•Œë¬¸ì— ê°’ì´ ìˆì„ìˆ˜ë„ ì—†ì„ìˆ˜ë„ ìˆëŠ” ìƒíƒœì…ë‹ˆë‹¤.

```swift
let possibleNumber = "123"
var convertedNumber = Int(possibleNumber)
type(of: convertedNumber) 	// Optional<Int>.Type
```

<br>

<br>

## Optional Type

íƒ€ì…ì„ ì–¸ì„ í•´ì¤„ë•ŒëŠ” ë°ì´í„° íƒ€ì… ë’¤ì— ?ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

ê°’ì´ ì—†ëŠ” ìƒíƒœì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ nilì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.

```swift
var optionalType1: String?
var optionalType2: Optional<Int>

type(of: optionalType1)		// Optional<String>.Type
optionalType2		// nil
```

<br>

nilê³¼ 0ì€ ë‹¤ë¦…ë‹ˆë‹¤. nilì€ ì—†ë‹¤ë¼ëŠ” ëœ»ì´ê³  0ì€ 0ì´ ìˆëŠ” ìƒíƒœì…ë‹ˆë‹¤.

```swift
var optionalInt: Int? = 0
optionalInt = nil
```

<br>

ì´ˆê¸°í™” Initë¥¼ í•˜ëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤

```swift
var optionalIntInit = Optional<Int>(0)
var optionalIntInit: Int? = 0
```

<br>

ì˜µì…”ë„ì€ ë…¼ì˜µì…”ë„ì´ ë ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë°˜ëŒ€ë¡œ ë…¼ì˜µì…”ë„ì€ ì˜µì…”ë„ì´ ë ìˆ˜ ìˆìŠµë‹ˆë‹¤

```swift
var nonOptional1 = nil	// data Typeì„ ì•Œìˆ˜ ì—†ì–´ì„œ ì—ëŸ¬
var nonOptional2: Int = nil // Optionalì¸ë° Intë¡œ íƒ€ì…ì„ ì–¸ì´ ë˜ì–´ì„œ ì—ëŸ¬
var nonOptionalType: Int = optionalInt // optionalIntì€ ì˜µì…”ë„ë¡œ ê°’ì´ ìˆì„ìˆ˜ë„ ì—†ì„ìˆ˜ë„ ìˆëŠ”ë° nonOptionalTypeì€ Intë¡œ íƒ€ì…ì„ ì„ ì–¸í•´ì¤˜ì„œ ì—ëŸ¬

var optionalInt: Int? = nil
var integer = 1
optionalInt = integer
print(optionalInt)    // Optional(1) // Wappedí•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.
```

ë‹¤ìŒì€ Optionalì˜ í—¤ë”ì…ë‹ˆë‹¤.

>  Swiftâ€™s nil isnâ€™t the same as nil in Objective-C.
>
> In Objective-C, nil is a pointer to a nonexistent object.
>
> In Swift, nil isnâ€™t a pointerâ€”itâ€™s the absence of a value of a certain type.
>
> Optionals of any type can be set to nil, not just object types.

Objective-CëŠ” Optionalì´ë¼ëŠ”ê±´ ì—†ì§€ë§Œ nilê³¼ ê°™ì€ ê°œë…ì€ ìˆìŠµë‹ˆë‹¤. ê·¼ë° swiftì™€ Objective-Cì˜ nilì€ ì°¨ì´ê°€ ìˆìŠµë‹ˆë‹¤.

Objective-Cì—ì„œ nilì€ í¬ì¸í„°ì˜ ê°œë…ìœ¼ë¡œ nonexistent objectë¼ê³  Objectê°€ heapì— ë“¤ì–´ ê°”ëŠ”ë° ì£¼ì†Œê°€ ë‚˜íƒ€ë‚˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ëœ»ì´ê³ ,

swiftì—ì„œëŠ” enum íƒ€ì…ìœ¼ë¡œ ê°’ì˜ ë¶€ì¬ë¥¼ ì•Œë¦¬ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤.

nilì´ë¼ëŠ”ê²ƒ ìì²´ê°€ í¬ì¸í„°ì™€ ê°™ì´ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ê°€ë¥´í‚¤ëŠ”ê²Œ ì•„ë‹ˆë¼ optionalì´ë¼ëŠ” typeì„ í†µí•´ì„œ nilì„ í‘œí˜„í•˜ê³  ìˆìŠµë‹ˆë‹¤.

<br>

<br>

## If Statements and Forced Unwrapping  

ëŠë‚Œí‘œ(!)ë¥¼ ì‚¬ìš©í•´ì„œ Unwrappingì„ í• ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```swift
var convertedNumber: Int? = 123

print(convertedNumber)	// optional(123)
print(convertedNumber!)	// 123
```

<br>

ifë¬¸ì„ ì‚¬ìš©í•´ì„œ nilì¸ì§€ ì•„ë‹Œì§€ë¥¼ íŒë‹¨í•œ í›„ ëŠë‚Œí‘œ(!)ë¥¼ ì‚¬ìš©í•´ì„œ Unwrappingì„ í• ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```swift
var convertedNumber: Int? = 123

if convertedNumber != nil {
  print("convertedNumber has an integer value of \(convertedNumber).")	// Optional(123)
}

if convertedNumber != nil {
  print("convertedNumber has an integer value of \(convertedNumber!).")	// 123
}
```

ê·¸ëŸ°ë° ëŠë‚Œí‘œ(!)ë¥¼ ì‚¬ìš©í•´ì„œ Unwrappingì„ í•´ì£¼ë©´ ëŸ°íƒ€ì„ì¤‘ì— !ë¥¼ ë³´ê³  ê°’ì´ ìˆë‹¤ê³  ìƒê°í•˜ì—¬ ë¬´ì¡°ê±´ Unwrappingì„ í•©ë‹ˆë‹¤. ê·¸ëŸ°ë° ê·¸ë•Œ ê°’ì´ ì—†ìœ¼ë©´ ê³„ì† ê°’ì„ ì°¾ë‹¤ê°€ ëŸ°íƒ€ì„ì—ëŸ¬ê°€ ë°œìƒí•˜ì—¬ ì•±ì´ ë©ˆì¶”ê²Œ ë©ë‹ˆë‹¤.

ì´ëŸ° ë°©ì§€í•˜ê¸° ìœ„í•œê²Œ Optional Bindingì…ë‹ˆë‹¤.

<br><br>

## Optional Binding

> Optional Bindingì„ í•œë‹¤ê³  í•´ì„œ Unwrappingì´ ë˜ëŠ”ê±´ ì•„ë‹™ë‹ˆë‹¤.

actualNumberëŠ” Optional íƒ€ì…ì„ ê°€ì§€ê²Œ ë©ë‹ˆë‹¤.

```swift
var possibleNumber: String = "123"

let actualNumber = Int(possibleNumber)
print(auactualNumber)	// optional(123)
type(of: actualNumber) 	// Optional<String>.Type
```

<br>

ì•„ë˜ì™€ ê°™ì´ Optional Bindingì„ í•´ì£¼ê²Œ ë˜ë©´ possibleNumberê°’ì´ ìˆì„ê²½ìš° ì²«ë²ˆì§¸ printë¬¸ì„ ì‹¤í–‰ì‹œí‚¤ê²Œ ë˜ê³  ì—†ìœ¼ë©´(nil) elseë¬¸ì„ ì‹¤í–‰í•˜ê²Œ ë©ë‹ˆë‹¤.

```swift
var possibleNumber: String = 123

let actualNumber = Int(possibleNumber)

if let actualNumber = Int(possibleNumber) {
    print("\"\(possibleNumber)\" has an integer value of \(actualNumber)")
} else {
    print("\"\(possibleNumber)\" could not be converted to an integer")
}

type(of: actualNumber)		// Optional<Int>.Type
type(of: possibleNumber)	// String.Type
```

<br>

Optional Bindingì„ í†µí•´ì„œ ê°’ì„ ë³€ê²½í•´ ì¤„ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

```swift
var optionalStr: String? = "Hello, Optional"

// ê°’ì´ ìˆì„ë•ŒëŠ” optionalStr ê·¸ ê°’ì„ ë°›ì•„ë“¤ì…ë‹ˆë‹¤.
if let optionalStr = optionalStr {
    optionalStr
} else {
    "valueless string"
}

print(optionalStr)		// optional("Hello, Optional")
```

```swift
var optionalStr: String? = nil

// ê°’ì´ ì—†ìœ¼ë©´ optionalStrì˜ ê°’ì„ "valueless string"ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.
if let optionalStr = optionalStr {
    optionalStr
} else {
    "valueless string"
}

print(optionalStr)		// nil
```

<br>

varialbleë¡œ Optional Bindingì„ í•˜ë©´ ê°’ì„ ì¶”ê°€ í• ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

```swift
var optionalStr: String? = "Hello, Optional"

if var str = optionalStr {
    str += "ğŸ˜"
}

print(str)	// "Hello, OptionalğŸ˜"
```

<br>

Early exitì„ í• ìˆ˜ìˆëŠ” guardë¬¸ì„ ì‚¬ìš©í•´ì„œ Optional Bindingì„ í• ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```swift
func doSomething(str: String?) {
    print(str)		// Optional("something") // ê²½ê³  ë°œìƒ
    type(of: str)	// Optional<String>.Type

    guard let str = str else { return }
    print(str)		// something
    type(of: str)	// String.Type
}

doSomething(str: "something")
```

<br>

Optional Bindingì€ (,)ë¥¼ ì‚¬ìš©í•´ì„œ ì—¬ëŸ¬ê°œë¥¼ í•˜ê±°ë‚˜ ë¹„êµ ì—°ì‚°ì(Comparison Operator)ë¥¼ ì‚¬ìš©í•´ì„œ Booleanì„ ì¡°ê±´ìœ¼ë¡œ ì¤„ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

```swift
// ì¡°ê±´ì´ trueì„ìœ¼ë¡œ 4<42<100ì´ ì¶œë ¥ë©ë‹ˆë‹¤.
if let firstNumber = Int("4"), let secondNumber = Int("42"), firstNumber < secondNumber && secondNumber < 100 {
    print("\(firstNumber) < \(secondNumber) < 100")
}

// ì¡°ê±´ì´ falseë¡œ ì•„ë¬´ê²ƒë„ ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
if let firstNumber = Int("444"), let secondNumber = Int("42"), firstNumber < secondNumber {
    print("\(firstNumber) < \(secondNumber)")
}
```

<br>

ìœ„ì™€ ê°™ì´ (,)ì„ ì°ì–´ì„œ ë³´ë©´ ë™ì‘ì€ í•˜ì§€ë§Œ ê°€ë…ì„±ì´ ë³„ë¡œì´ê¸° ë•Œë¬¸ì— ì•„ë˜ì™€ ê°™ì´ í‘œí˜„ í• ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```swift
if let firstNumber = Int("4") {
    if let secondNumber = Int("42") {
        if firstNumber < secondNumber && secondNumber < 100 {
            print("\(firstNumber) < \(secondNumber) < 100")
        }
    }
}
```

<br>

<br>

## IUO (Implicitly Unwrapped Optionals)

Typeì„ ì„ ì–¸í• ëŒ€ ë’¤ì— ëŠë‚Œí‘œ(!)ë¥¼ ë¶™ì—¬ì„œ ì‚¬ìš©í•˜ë©°, ë¬´ì¡°ê±´ ê°’ì´ ìˆë‹¤ë¼ê³  ì´í•´í•˜ë©´ ë ê²ƒ ê°™ìŠµë‹ˆë‹¤.

```swift
let assumedString: String! = "An implicitly unwrapped optional string."
```

ë§Œì•½ ëŠë‚Œí‘œ(!)ë¥¼ ë¶™ì˜€ëŠ”ë° ê°’ì´ ì—†ìœ¼ë©´ ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤.

ì–´ëŠ ìˆœê°„ì´ë¼ë„ nilì´ ë“¤ì–´ì˜¬ìˆ˜ ìˆëŠ” ê²½ìš°ì—ëŠ” ì‚¬ìš©í•˜ì§€ ë§ì•„ì•¼ í•˜ë©° nil valueë¥¼ checkí•´ì•¼ í•˜ë©´ ì¼ë°˜ì ì¸ ì˜µì…”ë„ íƒ€ì…ì„ ì‚¬ìš©í•˜ë©´ ë ê²ƒ ê°™ìŠµë‹ˆë‹¤.

```swift
let assumedString: String! = "An"

if assumedString != nil {
  print(assumedString!)		// An
}

if let definiteString = assumedString {
  print(definiteString)		// An
}
```

<br>

<br>

## Nil-coalescing Operator

ì§€ê¸ˆê¹Œì§€ëŠ” ifë¬¸ì„ ì‚¬ìš©í•´ì„œ Optional bindingì„ í•´ì¤¬ëŠ”ë°, ë¬¼ìŒí‘œ 2ê°œ(??)ë¥¼ ì‚¬ìš©í•´ì„œë„ bindingì„ í• ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```swift
let defaultColorName = "red"
var userDefinedColorName: String? 

var colorNameToUse = userDefinedColorName ?? defaultColorName   
print(colorNameToUse)		// red

userDefinedColorName = "green"
colorNameToUse = userDefinedColorName ?? defaultColorName
print(colorNameToUse)		// green
```

ìœ„ì˜ ì½”ë“œì™€ ê°™ì´ `A ?? B` ëŠ” ê°’ì´ ìˆìœ¼ë©´ Aë¥¼ ì‚¬ìš©í•˜ê³  ì—†ìœ¼ë©´ Bë¥¼ ì‚¬ìš©í•˜ë¼ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤.

result = A ?? B ì™€ ê°™ì´ ìƒê¸´ ëª¨ìŠµì´ 3í•­ì—°ì‚°ìì™€ ë¹„ìŠ·í•˜ê²Œ ìƒê²¼ëŠ”ë°, ì‹¤ì œ ë‚´ë¶€ì—ì„œ í™•ì¸ì„ í•´ë³´ë©´ 3í•­ì—°ì‚°ìë¥¼ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤

>  The nil-coalescing operator is shorthand for the code below: 
>
>  a ?? b
>
>  a != nil ? a! : b

<br>

<br>

## Optional Chaining



```swift
class Person1 {
    var residence: Residence1?
}
class Residence1 {
    var numberOfRooms = 1
    var address: String?
}

let edward = Person1()
edward.residence = Residence1()

let roomCount1 = edward.residence?.numberOfRooms
let roomCount2 = edward.residence!.numberOfRooms
```

ìœ„ì˜ ì½”ë“œì—ì„œ  `numberOfRooms` ì€ Literal 1ì„ ê°€ì§„ ë³€ìˆ˜ì…ë‹ˆë‹¤.

ê·¸ ë³€ìˆ˜ë¥¼ ê°€ì§€ê³  ìˆëŠ” classë¥¼ Optionalì´ ì„ ì–¸ëœ ë³€ìˆ˜ì— ì¸ìŠ¤í„´ìŠ¤í™” í•´ì¤€ ë’¤ì— ì¼ë°˜ì ì¸ ë°©ë²•ìœ¼ë¡œ ì‚¬ìš©í•˜ë ¤ê³  í•˜ë©´ ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤.

ê·¸ë˜ì„œ `edward.residence?.numberOfRooms` ì™€ ê°™ì´ ë¬¼ìŒí‘œ(?)ë¥¼ ë¶™ì—¬ì¤˜ì•¼ í•©ë‹ˆë‹¤.

ì•ì—ì„œ Oprionalì´ ë˜ë©´ ë’¤ì—ê°’ë“¤ë„ ìˆëŠ”ì§€ ì—†ëŠ”ì§€ ëª¨ë¥´ëŠ” ìƒíƒœê°€ ë©ë‹ˆë‹¤.

ì´ëŸ° ìƒíƒœë¥¼ Optional Chainingì´ë¼ í•©ë‹ˆë‹¤.

ì—¬ê¸°ì„œë„ ëŠë‚Œí‘œ(!)ë¥¼ ì‚¬ìš©í•˜ë©´ Optional(1)ì´ ì•„ë‹Œ 1 ê°’ì´ roomCount2ë¡œ ë“¤ì–´ê°€ê²Œ ë©ë‹ˆë‹¤. Optional Chainingìƒíƒœì´ê¸° ë•Œë¬¸ì— ë’¤ì— ë”°ë¼ì˜¤ëŠ” `numberOfRooms` ë„ unwrappedê°€ ë©ë‹ˆë‹¤.

Optional bindingë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.

```swift
if let reoomCount = edward.residence?.numberOfRooms {
    print("John's residence has \(roomCount) room(s).")
} else {
    print("Unable to retrieve the number of rooms.")
}
```

<br>

<br>

## Defining Model Classes for Optional Chaining

ì£¼ì†Œì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ë•Œ ì˜µì…”ë„ì€ ì´ìš©í•œë‹¤ë©´?

```swift
class Address {
    var city: String?
    var loadName: String?
    var buildingName: String?
    var zipCode: Int?
    
    func address(city: String?, loadName: String?, buildingName: String?, zipCode: Int?) {
        if let city = city, let loadName = loadName, let buildingName = buildingName, let zipCode = zipCode {
            print("\(city), \(loadName), \(buildingName), \(zipCode)")
        } else {
            print("ì˜ëª»ëœ ì…ë ¥ê°’ì…ë‹ˆë‹¤")
        }
    }
}

let address = Address()
address.address(city: "Ansan", loadName: "Ansan-gil", buildingName: "sak", zipCode: 123)

// ê²°ê³¼ê°’
// Ansan , Ansan-gil, sak, 123
```

ê°’ì´ 1ê°œë¼ë„ nilë¡œ ë“¤ì–´ ì˜¨ë‹¤ë©´ "ì˜ëª»ëœ ì…ë ¥ê°’ì…ë‹ˆë‹¤"ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.

<br>

<br>

## Array optional

```swift
var arr1: [Int]? = [1, 2, 3]

// ë°°ì—´ì˜ ìì²´ Optional, ë°°ì—´ì˜ ê°’ì˜ typeì€ Intì´ê¸° ë•Œë¬¸ì— ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤.
var arr2: [Int]? = [1, 2, 3, nil] 

// Optional Intë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ìœ¼ë©´ ì•ˆìª½ì— ë„£ì–´ì¤˜ì•¼ í•©ë‹ˆë‹¤.
var arr3: [Int?] = [1, 2, 3, nil]
```

Array typeì˜ ë’¤ì— ?ê°€ ë¶™ìœ¼ë©´ ë°°ì—´ ì „ì²´ë¥¼ optionalë¡œ ì„ ì–¸

Array typeì•ˆì— ?ê°€ ë¶™ìœ¼ë©´ ë°°ì—´ì˜ ê°’ìœ¼ë¡œ optionalë¡œ ë°›ì„ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```swift
var arr3: [Int?]? = [1, 2, 3, nil]
```

ë‘˜ë‹¤ ì‚¬ìš©í•˜ë©´ ë‹¤ ì“¸ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br>

Arrayì—ì„œ optional binding í•˜ëŠ” ë°©ë²•

```swift
var arr2: [Int?] = [1, 2, 3, nil]


// arrayBinding = 2
if let arrayBinding = arr2[1] {
    arrayBinding
} else {
    print("ë•¡")
}

// "ë•¡" ì¶œë ¥
if let arrayBinding = arr2[3] {
    arrayBinding
} else {
    print("ë•¡")
}
```

<br>

Arrayì—ì„œ ì‚¬ìš©í•˜ë˜ í‚¤ì›Œë“œë„ ì‚¬ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

```swift
var arr1: [Int]? = [1, 2, 3]
var arr2: [Int?] = [1, 2, 3, nil]

arr1?.count
arr1?[0]

arr2?.count		// nilê°’ì´ ìˆì–´ì„œ ì—ëŸ¬ ë°œìƒ
```

<br>

<br>

<br>

## Optional Function Types 

í´ë¡œì ¸ë¥¼ ì‚¬ìš©í•´ì„œ functionë„ optionalë¡œ ë§Œë“¤ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```swift
let function: (() -> Int?)? = nil
function?()
function!()	// ì—ëŸ¬ ë°œìƒ
```

<br>

<br>











